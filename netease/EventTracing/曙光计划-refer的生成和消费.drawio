<mxfile host="app.diagrams.net" modified="2021-11-05T07:54:56.392Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36" etag="dw44DW7bcIgvwlTH0BUA" version="15.6.8" type="github">
  <diagram id="_ZPEgi9wng2458FTJGSn" name="Page-1">
    <mxGraphModel dx="1717" dy="2250" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="yxq1icMLa7VZch2Kp3X8-10" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fontSize=13;strokeWidth=1;strokeColor=none;fillColor=#FFD4D2;" vertex="1" parent="1">
          <mxGeometry x="730" y="1350" width="617.5" height="650" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-77" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeWidth=1;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="730" y="955" width="590" height="345" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-54" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeWidth=1;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="730" y="295" width="587.5" height="310" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-53" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeWidth=1;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="727.5" y="625" width="590" height="250" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-1" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fontColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="40" y="-1100" width="710" height="660" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-2" value="" style="html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;shadow=0;dashed=0;strokeWidth=1;shape=mxgraph.ios7.misc.iphone;strokeColor=#c0c0c0;fontColor=#000000;fillColor=#ffffff;align=left;" parent="1" vertex="1">
          <mxGeometry x="75" y="-890" width="200" height="400" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-3" value="page_A" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="89" y="-830" width="61" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-6" value="btn_a" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#000000;strokeColor=#000000;align=center;fontStyle=1;fillColor=#97D077;" parent="1" vertex="1">
          <mxGeometry x="140.5" y="-710" width="69" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-9" value="" style="html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;shadow=0;dashed=0;strokeWidth=1;shape=mxgraph.ios7.misc.iphone;strokeColor=#c0c0c0;fontColor=#000000;fillColor=#ffffff;align=left;" parent="1" vertex="1">
          <mxGeometry x="470" y="-890" width="200" height="400" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-10" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontColor=#000000;strokeColor=#666666;" parent="1" source="CS7jje6rmYeDG2XOKvHa-6" target="CS7jje6rmYeDG2XOKvHa-9" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="586.75" y="-690" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-12" value="page_B" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="483" y="-830" width="58" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-13" value="点击进入页面 B" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontColor=#000000;" parent="1" vertex="1" connectable="0">
          <mxGeometry x="-20" y="-650" as="geometry">
            <mxPoint x="373" y="-13" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-14" value="&lt;span style=&quot;font-size: 16px&quot;&gt;实际场景分析1:&lt;/span&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="40" y="-1100" width="145" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-15" value="&lt;h1&gt;过程解读&lt;/h1&gt;&lt;p&gt;1. 页面 A 有一个按钮 btn_a, 点击进入页面 B&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontColor=#000000;align=left;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="75" y="-1020" width="385" height="100" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-18" value="" style="rounded=0;whiteSpace=wrap;html=1;strokeColor=#666666;fontColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="800" y="-1100" width="660" height="660" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-19" value="" style="html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;shadow=0;dashed=0;strokeWidth=1;shape=mxgraph.ios7.misc.iphone;strokeColor=#c0c0c0;fontColor=#000000;fillColor=#ffffff;align=left;" parent="1" vertex="1">
          <mxGeometry x="835" y="-890" width="200" height="400" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-20" value="page_A" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="849" y="-830" width="61" height="20" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-21" value="btn_a" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#000000;strokeColor=#000000;align=center;fontStyle=1;fillColor=#97D077;" parent="1" vertex="1">
          <mxGeometry x="900.5" y="-710" width="69" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-23" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontColor=#000000;strokeColor=#666666;" parent="1" source="CS7jje6rmYeDG2XOKvHa-21" target="CS7jje6rmYeDG2XOKvHa-27" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1346.75" y="-690" as="sourcePoint" />
            <mxPoint x="1140" y="-690" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-25" value="&lt;span style=&quot;font-size: 16px&quot;&gt;实际场景分析2:&lt;/span&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="800" y="-1100" width="145" height="40" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-26" value="&lt;h1&gt;过程解读&lt;/h1&gt;&lt;p&gt;1. 页面 A 有一个按钮 btn_a, 点击进入页面 B&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontColor=#000000;align=left;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="835" y="-1020" width="385" height="100" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-27" value="" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1150" y="-760" width="250" height="140" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-30" value="&lt;span style=&quot;color: rgb(0 , 0 , 0) ; font-family: &amp;#34;helvetica&amp;#34; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none&quot;&gt;添加 3 首歌到播放列表&lt;/span&gt;" style="text;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1160" y="-750" width="150" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-31" value="&lt;b&gt;song_1&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1225" y="-720" width="175" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-32" value="&lt;b&gt;song_2&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1225" y="-684" width="175" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-33" value="&lt;b&gt;song_3&lt;/b&gt;" style="rounded=1;whiteSpace=wrap;html=1;align=left;" parent="1" vertex="1">
          <mxGeometry x="1225" y="-650" width="175" height="30" as="geometry" />
        </mxCell>
        <mxCell id="CS7jje6rmYeDG2XOKvHa-34" value="&lt;h1&gt;2. 点击事件的AOP&lt;/h1&gt;&lt;p&gt;1. 点击事件的AOP，目前做了以下几个场景:&lt;br&gt;&lt;span&gt;&amp;nbsp; &amp;nbsp;=&amp;gt; 1) UIView 的tap gesture点击&lt;br&gt;&amp;nbsp; &amp;nbsp;=&amp;gt; 2) UIControl的 target-action UIControlEventTouchUpInside 事件&lt;br&gt;&amp;nbsp; &amp;nbsp;=&amp;gt; 3) UITableViewCell &amp;amp; UICollectionViewCell 的点击事件&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;2. 点击事件的AOP，是 &lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;pre &amp;amp;&amp;amp; after&lt;/font&gt;&lt;/b&gt; 前后都hock的&lt;/p&gt;&lt;p&gt;3. 详细请参阅 &lt;b&gt;AOP环节&lt;/b&gt; 的讲解&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="-50" width="430" height="170" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-1" target="x_XK1Yig7gq4vAHvtXbg-3" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-1" value="一个按钮的点击" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="547.5" y="75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-3" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="727.5" y="-50" width="470" height="310" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-4" target="x_XK1Yig7gq4vAHvtXbg-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-4" value="original &lt;br&gt;click code" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="902.5" y="75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-8" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-5" target="x_XK1Yig7gq4vAHvtXbg-4" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-5" value="pre" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="748" y="75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-6" value="after" style="rounded=1;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="1057.5" y="75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-10" value="&lt;h1&gt;1. 两个重要的队列 queue&lt;/h1&gt;&lt;p&gt;1. &lt;b&gt;page_refer&amp;nbsp;队列&lt;/b&gt;（页面refer）&amp;nbsp; &amp;amp;&amp;amp; &lt;b&gt;auto_event_refer 队列&lt;/b&gt; （事件refer）&lt;span&gt;&lt;br&gt;&lt;/span&gt;&lt;/p&gt;&lt;p&gt;2.&amp;nbsp;&lt;b&gt;page_refer&lt;/b&gt;&lt;b&gt;&amp;nbsp;队列&lt;/b&gt;: 为页面的 _pgrefer &amp;amp; _psrefer &amp;amp; _hsrefer的生成服务，专指页面跳转场景&lt;br&gt;&lt;/p&gt;&lt;p&gt;3.&amp;nbsp;&lt;b&gt;auto_event_refer&lt;/b&gt;&lt;b&gt;&amp;nbsp;队列&lt;/b&gt;: 为一个事件对后续一些业务埋点产生的效果而服务&lt;/p&gt;&lt;p&gt;4. 举例（最上面的大图）:&lt;br&gt;&amp;nbsp; &amp;nbsp; 1) 页面 A 的按钮 a1 点击跳转到了 B 页面，则 B 页面的_pgrefer 就指向了 A.a1 点击&lt;br&gt;&amp;nbsp; &amp;nbsp; 2) 页面 A 的按钮 a2 点击，是将5首歌添加到播放列表，则这五首歌的 _addrefer 就指向 A.a2 点击&lt;/p&gt;&lt;p&gt;5. _pgrefer队列 的详细讲解参见 &lt;b&gt;refer环节&lt;/b&gt; 讲解&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="-350" width="550" height="210" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-11" value="&lt;h1&gt;3. EventRefer 的问题 &amp;amp; 解决方案&lt;/h1&gt;&lt;p&gt;1. EventRefer的格式(解读见右图): [_sessid][p/e][_actseq][_pgstep][_spm]&lt;/p&gt;&lt;p&gt;2. 问题点: &lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 1) _actseq在SDK内是在点击事件埋点即将输出的时候才自增的，而且是在子线程处理的&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 2) 所以在添加歌曲到播放列表代码执行的时候，_actseq还未 +1 (业务方应该在这里使用_addrefer)&lt;br&gt;&lt;/p&gt;&lt;p&gt;3. 解决办法:&amp;nbsp;&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 1) 在点击事件前后 pre &amp;amp; after 分别hock&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 2) 在 pre 环节，取出 _sessid, e/p, _actseq, _pgstep, _spm 等参数&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 3) 其中 _actseq 是需要 &lt;font color=&quot;#ff0000&quot; style=&quot;font-weight: bold&quot;&gt;预加1&lt;/font&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 4) 然后将该 refer 存入 EventRefer 队列&lt;br&gt;&lt;/p&gt;&lt;p&gt;4. 效果: 提供全局方法，可以获取上一次的 EventRefer，这样对于歌曲播放，业务开发人员不需要关注，只需要在播放器层面取最后一次即可&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="40" y="300" width="560" height="270" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-12" value="" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1">
          <mxGeometry x="795.5" y="430" width="402" height="45" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-14" value="[_sessid]" style="text;html=1;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=16;fontColor=#CC00CC;strokeColor=#CC00CC;" parent="1" vertex="1">
          <mxGeometry x="817.5" y="442.5" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-15" value="[e/p]" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="894.5" y="442.5" width="53" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-16" value="[_actseq]" style="text;html=1;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=16;fontColor=#FF0000;strokeColor=#FF0000;" parent="1" vertex="1">
          <mxGeometry x="957.5" y="442.5" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-17" value="[_pgstep]" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="1037" y="442.5" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-18" value="[_spm]" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=16;" parent="1" vertex="1">
          <mxGeometry x="1117.5" y="442.5" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-20" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=16;fontColor=#CC00CC;strokeColor=#CC00CC;dashed=1;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-19" target="x_XK1Yig7gq4vAHvtXbg-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-19" value="&lt;span style=&quot;font-size: 12px; text-align: left;&quot;&gt;事件发生的时候的 _sessid&lt;/span&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;dashed=1;fontSize=16;strokeColor=#CC00CC;strokeWidth=2;fontColor=#CC00CC;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="742.5" y="325" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-22" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontSize=16;fontColor=#666666;strokeColor=#666666;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-21" target="x_XK1Yig7gq4vAHvtXbg-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-21" value="&lt;span style=&quot;font-size: 12px; text-align: left;&quot;&gt;事件发生的节点是page还是element&lt;/span&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;dashed=1;fontSize=16;strokeWidth=2;fillColor=none;strokeColor=#666666;fontColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="922.5" y="305" width="115" height="80" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-24" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontSize=16;fontColor=#666666;strokeColor=#FF0000;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-23" target="x_XK1Yig7gq4vAHvtXbg-16" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-23" value="&lt;b style=&quot;color: rgb(0 , 0 , 0) ; font-size: 12px ; text-align: left&quot;&gt;&lt;font color=&quot;#ff0000&quot;&gt;在当前 rootpage 范围内发生的第几次“交互”&lt;/font&gt;&lt;/b&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;dashed=1;fontSize=16;strokeWidth=2;fontColor=#CC00CC;fillColor=none;strokeColor=#FF0000;" parent="1" vertex="1">
          <mxGeometry x="870" y="520" width="245" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-26" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontSize=16;fontColor=#666666;strokeColor=#666666;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-25" target="x_XK1Yig7gq4vAHvtXbg-17" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-25" value="&lt;span style=&quot;font-size: 12px ; text-align: left&quot;&gt;事件发生时的页面深度&lt;/span&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;dashed=1;fontSize=16;strokeWidth=2;fillColor=none;fontColor=#666666;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1057.5" y="315" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-28" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;fontSize=16;fontColor=#666666;strokeColor=#666666;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-27" target="x_XK1Yig7gq4vAHvtXbg-18" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-27" value="&lt;span style=&quot;font-size: 12px ; text-align: left&quot;&gt;节点的spm&lt;/span&gt;" style="shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;dashed=1;fontSize=16;strokeWidth=2;fillColor=none;fontColor=#666666;strokeColor=#666666;" parent="1" vertex="1">
          <mxGeometry x="1147.5" y="515" width="130" height="60" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-33" value="Time线" style="text;html=1;strokeColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1175" y="775" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-34" value="" style="shape=flexArrow;endArrow=classic;html=1;dashed=1;fontSize=16;fontColor=#000000;strokeColor=#666666;startArrow=none;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-47" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="795.5" y="765" as="sourcePoint" />
            <mxPoint x="1275.5" y="765" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-35" value="" style="endArrow=classic;html=1;dashed=1;fontSize=16;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="835.5" y="755" as="sourcePoint" />
            <mxPoint x="935.5" y="675" as="targetPoint" />
            <Array as="points">
              <mxPoint x="875.5" y="675" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-38" value="" style="shape=flexArrow;endArrow=classic;html=1;dashed=1;fontSize=16;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="935.5" y="675" as="sourcePoint" />
            <mxPoint x="1165.5" y="675" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-39" value="子线程: EventEmiter线程" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="934.5" y="645" width="161" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-40" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;startArrow=none;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1095.5" y="685" as="sourcePoint" />
            <mxPoint x="1225.5" y="725" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1115.5" y="725" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-42" value="" style="endArrow=none;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1105.5" y="685" as="sourcePoint" />
            <mxPoint x="1108.8333333333333" y="681" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-45" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="924.5" y="1185" as="sourcePoint" />
            <mxPoint x="1044.5" y="1255" as="targetPoint" />
            <Array as="points">
              <mxPoint x="954.5" y="1255" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-47" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeWidth=2;fillColor=none;strokeColor=#CC6600;" parent="1" vertex="1">
          <mxGeometry x="905.5" y="758" width="140" height="10" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-48" value="" style="shape=flexArrow;endArrow=none;html=1;dashed=1;fontSize=16;fontColor=#000000;strokeColor=#666666;" parent="1" target="x_XK1Yig7gq4vAHvtXbg-47" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="795.5" y="765" as="sourcePoint" />
            <mxPoint x="1405.5" y="765" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-49" value="业务: 添加歌曲到播放列表" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="902.5" y="1265" width="168" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-50" value="按钮点击" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="803" y="675" width="70" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-51" value="&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;_actseq+1&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1118" y="705" width="90" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-55" value="" style="shape=flexArrow;endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="780.5" y="1180" as="sourcePoint" />
            <mxPoint x="1310.5" y="1180" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-56" value="Time线" style="text;html=1;strokeColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;" parent="1" vertex="1">
          <mxGeometry x="1220.5" y="1149" width="60" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-57" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="833" y="1170" as="sourcePoint" />
            <mxPoint x="953" y="1090" as="targetPoint" />
            <Array as="points">
              <mxPoint x="853" y="1090" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-58" value="按钮点击 &lt;b&gt;pre&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="773" y="1080" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-59" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" parent="1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1153.5" y="1170" as="sourcePoint" />
            <mxPoint x="1273.5" y="1090" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1173.5" y="1090" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-60" value="按钮点击 &lt;b&gt;after&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="1089" y="1080" width="94" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-61" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeWidth=2;fillColor=none;strokeColor=#CC6600;" parent="1" vertex="1">
          <mxGeometry x="923" y="1175" width="140" height="10" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-64" value="" style="rounded=0;whiteSpace=wrap;html=1;fontSize=13;fontColor=#000000;strokeColor=#666666;strokeWidth=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="904" y="990" width="249" height="50" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-67" value="refer_0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=13;fontColor=#000000;strokeColor=#666666;strokeWidth=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="918" y="995" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-68" value="refer_1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=13;fontColor=#000000;strokeColor=#666666;strokeWidth=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="973" y="995" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-69" value="refer_2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=13;fontColor=#000000;strokeColor=#666666;strokeWidth=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1025.5" y="995" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-70" value="refer_3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=13;fontColor=#000000;strokeColor=#666666;strokeWidth=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1083" y="995" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-71" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;entryX=0;entryY=0.5;entryDx=0;entryDy=0;exitX=0.75;exitY=0;exitDx=0;exitDy=0;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-58" target="x_XK1Yig7gq4vAHvtXbg-64" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="810.5" y="1070" as="sourcePoint" />
            <mxPoint x="860.5" y="1020" as="targetPoint" />
            <Array as="points">
              <mxPoint x="833.5" y="1030" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-72" value="push" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fontSize=13;fontColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="833" y="1030" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-73" value="EventRefer Queue" style="text;html=1;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=13;fontColor=#000000;strokeColor=#000000;" parent="1" vertex="1">
          <mxGeometry x="904" y="970" width="125" height="20" as="geometry" />
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-74" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;exitX=0.75;exitY=1;exitDx=0;exitDy=0;" parent="1" source="x_XK1Yig7gq4vAHvtXbg-64" target="x_XK1Yig7gq4vAHvtXbg-49" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1000.5" y="1130" as="sourcePoint" />
            <mxPoint x="1050.5" y="1080" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1060.5" y="1220" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-75" value="取一个refer" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=13;fontColor=#000000;" parent="x_XK1Yig7gq4vAHvtXbg-74" vertex="1" connectable="0">
          <mxGeometry x="0.5442" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="x_XK1Yig7gq4vAHvtXbg-80" value="&lt;h1&gt;4. &lt;font color=&quot;#cc0000&quot;&gt;refer 的降级&amp;amp;容错处理&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;&lt;span&gt;1. 原因: 有可能会取错，比如上一个按钮没有做埋点，不是一个对象，则可能去的EventRefer是前一个按钮的点击&lt;/span&gt;&lt;/p&gt;&lt;p&gt;2. 解决:&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 1) 在 点击的pre 环节，将依赖view层级的 &lt;b&gt;pure_spm&lt;/b&gt; 存储下，并且记录时间&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 2) 等待取 EventRefer 的时候，同时也取出 pre_spm&amp;nbsp;&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 3) 对比下两个时间: &lt;b&gt;如果 pre_spm 比 EventRefer更晚，说明该EventRefer大概率是错误的&lt;/b&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 4) 可以在埋点的时候，以某种方式来标识出来&lt;/p&gt;&lt;p&gt;3. 云音乐的解决方案: EventRefer对应的是 _addrefer，如果识别出了是错误的，则再带上 _undefined_refer(pure_spm)&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; 对于云音乐有严重历史负担的app场景，比较实用&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; &lt;b&gt;随着埋点场景逐渐覆盖，_undefined_refer 渐渐都没有了值&lt;/b&gt;&lt;br&gt;&amp;nbsp; &amp;nbsp; =&amp;gt; &lt;b&gt;也可以利用该特性做校验，被标识出了错误，基本上就是需要修改的&lt;/b&gt;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="75" y="1015" width="560" height="250" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-1" value="&lt;h1&gt;4. &lt;font color=&quot;#cc0000&quot;&gt;_pgrefer, _psrefer 的降级&amp;amp;容错处理&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;1. 问题场景:&amp;nbsp;&lt;br&gt;&amp;nbsp; &amp;nbsp; -&amp;gt; 1) 实际场景，参见: &quot;&lt;b&gt;Refer 降级场景1&lt;/b&gt;&quot; 中描述的情况&lt;br&gt;&amp;nbsp; &amp;nbsp; -&amp;gt; 2) 问题: page_B 页面的 _pgrefer &amp;amp; _psrefer 会&lt;b&gt;&lt;font color=&quot;#ff0000&quot;&gt;指向 btn_a_1 按钮的点击&lt;/font&gt;&lt;/b&gt;埋点&lt;br&gt;&amp;nbsp; &amp;nbsp; -&amp;gt; 3) 希望: page_B 页面的 &lt;b&gt;&lt;font color=&quot;#cc00cc&quot;&gt;_pgrefer &amp;amp; _psrefer 降级到 page_A 的曝光&lt;/font&gt;&lt;/b&gt;埋点上&lt;/p&gt;&lt;p&gt;2. 三个队列解读:&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; 1）&lt;font color=&quot;#0000ff&quot;&gt;&lt;b&gt;page_refer 队列&lt;/b&gt;:&lt;/font&gt;&amp;nbsp;为页面的 _pgrefer &amp;amp; _psrefer &amp;amp; _hsrefer的生成服务，专指页面跳转场景&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;-&amp;gt; 一个事件发生了，会把该事件生成一个 refer 放入该队列中&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;-&amp;gt; 生成该 refer 的时机，是后置的，发生在该事件处理之后，&lt;b&gt;&lt;font color=&quot;#cc0000&quot;&gt;比如 AOP 的 after 之后&lt;/font&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; 2）&lt;font color=&quot;#cc00cc&quot;&gt;&lt;b&gt;auto_event_refer 队列&lt;/b&gt;&lt;/font&gt;:&amp;nbsp;为一个事件对后续一些业务埋点产生的效果而服务&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; -&amp;gt; 典型使用场景: 点击一个按钮（该行为是添加5首歌曲到播放列表），在业务 clickHandler 代码块中 直接获取该 refer ，然后将该 refer 关联到歌曲上&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; -&amp;gt; 生成该 refer 的时机: 比如&lt;b&gt;AOP 的 pre&lt;/b&gt; &amp;amp;&amp;amp; &lt;b&gt;自定义事件埋点的方法调用&lt;/b&gt;（有actseq预+1）（详情见上一个环节讲解）&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; -&amp;gt; 跟 &lt;b&gt;&lt;font color=&quot;#0000ff&quot;&gt;page_refer 队列&lt;/font&gt;&lt;/b&gt; 的最大区别: &lt;b&gt;生成时机比 page_refer 早，业务方获取的时候，在 clickHandler 代码块内，此时 page_refer 还未生成&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&amp;nbsp; &amp;nbsp; &lt;/b&gt;3）&lt;b&gt;&lt;font color=&quot;#00994d&quot;&gt;auto_event_AOP_refer 队列&lt;/font&gt;&lt;/b&gt;: 临时的存在，协助做降级逻辑使用&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; -&amp;gt; 生成: 该refer仅仅是原始 view 树的自底向上递归，类名的一个简单拼接（refer本身没什么意义）&lt;br&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; -&amp;gt; 生成时机: &lt;b&gt;AOP 的 pre&lt;/b&gt;&amp;nbsp;&lt;br&gt;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="70" y="1350" width="560" height="380" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-2" value="" style="html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;shadow=0;dashed=0;strokeWidth=1;shape=mxgraph.ios7.misc.iphone;strokeColor=#c0c0c0;fontColor=#000000;fillColor=#ffffff;align=left;" vertex="1" parent="1">
          <mxGeometry x="757.5" y="1580" width="200" height="400" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-3" value="page_A" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="780" y="1650" width="61" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-4" value="btn_a_1" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#000000;strokeColor=#000000;align=center;fontStyle=1;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="795" y="1710" width="69" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-5" value="" style="html=1;verticalLabelPosition=bottom;labelBackgroundColor=#ffffff;verticalAlign=top;shadow=0;dashed=0;strokeWidth=1;shape=mxgraph.ios7.misc.iphone;strokeColor=#c0c0c0;fontColor=#000000;fillColor=#ffffff;align=left;" vertex="1" parent="1">
          <mxGeometry x="1112.5" y="1580" width="200" height="400" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-6" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-11" target="yxq1icMLa7VZch2Kp3X8-5">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1342.25" y="1800" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-7" value="page_B" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1134" y="1650" width="58" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-8" value="&lt;span style=&quot;font-size: 16px&quot;&gt;Refer 降级场景 1:&amp;nbsp;&lt;/span&gt;&lt;font style=&quot;font-size: 12px&quot;&gt; &lt;font color=&quot;#ff0000&quot;&gt;=&amp;gt;&amp;nbsp;&lt;/font&gt;&lt;/font&gt;&lt;font style=&quot;font-size: 12px&quot; color=&quot;#ff0000&quot;&gt;&lt;b&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;_&lt;/font&gt;&lt;span style=&quot;font-size: 11px&quot;&gt;pgrefer &amp;amp;&amp;amp; _psrefer&lt;/span&gt;&lt;/b&gt;&lt;/font&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;strokeColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="751" y="1370" width="289" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-9" value="&lt;h1&gt;过程解读&lt;/h1&gt;&lt;p&gt;1. 页面 A 有两个按钮 &lt;b&gt;btn_a_1, btn_a_2&lt;/b&gt;&lt;br&gt;2. &lt;b&gt;&lt;font color=&quot;#336600&quot;&gt;btn_a_1 按钮已经做了曙光埋点&lt;/font&gt;&lt;/b&gt;，点击按钮是一个非页面跳转事件（比如点赞操作）&lt;br&gt;3. &lt;font color=&quot;#ff0000&quot;&gt;btn_a_2 按钮没有做曙光埋点接入&lt;/font&gt;，点击按钮跳转到 page_B&lt;br&gt;4. 操作过程: 在 page_A 页面先点击 btn_a_1，在点击 btn_a_2，=&amp;gt; 进入到了 page_B 页面&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontColor=#000000;align=left;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="754.5" y="1430" width="563" height="120" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-11" value="btn_a_2" style="rounded=1;whiteSpace=wrap;html=1;fontColor=#000000;strokeColor=#000000;align=center;fontStyle=1;fillColor=#CCCCCC;" vertex="1" parent="1">
          <mxGeometry x="795.5" y="1790" width="69" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-12" value="" style="shape=flexArrow;endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="89" y="2320" as="sourcePoint" />
            <mxPoint x="1600" y="2320" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-13" value="1. 打开 page_A" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="79.5" y="2280" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-14" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="115" y="2320" as="sourcePoint" />
            <mxPoint x="190" y="2240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="135" y="2240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-15" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fontColor=#CC0000;fillColor=#9999FF;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="75" y="2020" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-16" value="&lt;b&gt;Queue_1: page_refer 队列&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#0000FF;" vertex="1" parent="1">
          <mxGeometry x="75" y="1990" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-17" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fontColor=#CC0000;fillColor=#99FFCC;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="391" y="2520" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-18" value="" style="rounded=1;whiteSpace=wrap;html=1;fontSize=12;fontColor=#9999FF;fillColor=#FF99FF;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="713" y="2100" width="450" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-19" value="&lt;b&gt;&lt;font color=&quot;#cc00cc&quot;&gt;Queue_2: auto_event_refer 队列&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#0000FF;" vertex="1" parent="1">
          <mxGeometry x="713" y="2070" width="245.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-20" value="&lt;b&gt;&lt;font color=&quot;#00994d&quot;&gt;Queue_3: auto_event_AOP_refer 队列&lt;/font&gt;&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=12;fontColor=#00CC66;" vertex="1" parent="1">
          <mxGeometry x="391" y="2490" width="253" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-21" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r0&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="89" y="2025" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-22" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r1&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="140" y="2025" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-23" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r2&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="189.5" y="2025" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-25" value="&lt;b&gt;Refer_4：&lt;/b&gt;&lt;br&gt;rootPage imp" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#000000;fillColor=#CCCC00;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="567.5" y="2045" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-27" value="&lt;h1&gt;&lt;font style=&quot;font-size: 14px&quot;&gt;RootPage 曝光&lt;/font&gt;&lt;/h1&gt;&lt;div&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;1.&amp;nbsp;&lt;/font&gt;&lt;/div&gt;" style="text;html=1;strokeColor=default;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;fontSize=15;fontColor=#000000;align=left;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="2510" width="300" height="120" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-37" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;fontColor=#000000;strokeColor=#ABAB00;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-36" target="yxq1icMLa7VZch2Kp3X8-25">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="165" y="2085" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-38" value="&lt;font style=&quot;font-size: 12px&quot;&gt;记录 rootpage 曝光 refer&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;fontColor=#ABAB00;" vertex="1" connectable="0" parent="yxq1icMLa7VZch2Kp3X8-37">
          <mxGeometry x="-0.1553" y="3" relative="1" as="geometry">
            <mxPoint x="15" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-36" value="&lt;h1&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;页面曝光 （rootpage）&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;1. rootPage 曝光&lt;br&gt;2. 曝光refer，放在 &lt;b&gt;Refer_4&lt;/b&gt;&amp;nbsp;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="79.5" y="2140" width="170.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-39" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="2320" as="sourcePoint" />
            <mxPoint x="435" y="2240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="380" y="2240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-40" value="2. 点击 btn_a_1 按钮" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="310" y="2280" width="140" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-41" value="&lt;b&gt;&lt;i&gt;pre&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="399" y="2240" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-42" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="408" y="2320" as="sourcePoint" />
            <mxPoint x="483" y="2390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="418" y="2390" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-43" value="&lt;b&gt;&lt;i&gt;after&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="435" y="2370" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-49" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=1;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;exitX=1;exitY=0.25;exitDx=0;exitDy=0;strokeColor=#FF33FF;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-46" target="yxq1icMLa7VZch2Kp3X8-18">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="826" y="2163" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-50" value="pre 1. event refer 进队列" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontColor=#FF33FF;" vertex="1" connectable="0" parent="yxq1icMLa7VZch2Kp3X8-49">
          <mxGeometry x="-0.3726" y="2" relative="1" as="geometry">
            <mxPoint x="19" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-51" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=1;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;exitX=0.25;exitY=1;exitDx=0;exitDy=0;strokeColor=#00994D;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-46" target="yxq1icMLa7VZch2Kp3X8-20">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="398" y="2440" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-46" value="&lt;h1&gt;&lt;span style=&quot;font-size: 15px&quot;&gt;AOP -&amp;gt; pre&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;1. 生成 auto_event_refer (actseq预+1)&lt;br&gt;2. 生成 auto_event_AOP_refer&amp;nbsp;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="2140" width="220" height="90" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-52" value="pre 2. event AOP refer 进队列 【r1】" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontColor=#00994D;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="570.003739638611" y="2289.9980856804173" as="geometry">
            <mxPoint x="-173" y="153" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-54" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.25;entryY=1;entryDx=0;entryDy=0;fontSize=12;fontColor=#ABAB00;strokeColor=#3333FF;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-53" target="yxq1icMLa7VZch2Kp3X8-15">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="260" y="2380" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-53" value="&lt;h1&gt;&lt;span style=&quot;font-size: 15px&quot;&gt;AOP -&amp;gt; after&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;1. 生成 page_refer, 进队列&lt;br&gt;2. 打出 &lt;b&gt;_ec(点击)&lt;/b&gt; 埋点&amp;nbsp;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="483" y="2338" width="167" height="90" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-55" value="&lt;font&gt;after 1. 进 page refer 进队列&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontColor=#3333FF;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="255.00359332863945" y="2359.9966949504337" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-56" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="760" y="2320" as="sourcePoint" />
            <mxPoint x="835" y="2240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="780" y="2240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-57" value="3. 点击 btn_a_2 按钮（非节点）" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="687" y="2280" width="183" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-58" value="&lt;b&gt;&lt;i&gt;pre&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="795.5" y="2240" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-60" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="795.5" y="2325" as="sourcePoint" />
            <mxPoint x="870.5" y="2395" as="targetPoint" />
            <Array as="points">
              <mxPoint x="805.5" y="2395" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-61" value="&lt;b&gt;&lt;i&gt;after&lt;/i&gt;&lt;/b&gt;" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;fillColor=none;fontSize=12;fontColor=#000000;" vertex="1" parent="1">
          <mxGeometry x="818" y="2373" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-62" value="&lt;h1&gt;&lt;span style=&quot;font-size: 15px&quot;&gt;AOP -&amp;gt; after&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;1. 什么也不做&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="870" y="2348" width="130" height="72" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-63" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;fontSize=12;fontColor=#000000;exitX=0.25;exitY=1;exitDx=0;exitDy=0;strokeColor=#00994D;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-64" target="yxq1icMLa7VZch2Kp3X8-17">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1160" y="2360" as="sourcePoint" />
            <mxPoint x="1219.25" y="2650" as="targetPoint" />
            <Array as="points">
              <mxPoint x="881" y="2490" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-64" value="&lt;h1&gt;&lt;span style=&quot;font-size: 15px&quot;&gt;AOP -&amp;gt; pre&lt;/span&gt;&lt;/h1&gt;&lt;p&gt;1. 生成 auto_event_AOP_refer&amp;nbsp;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="835" y="2180" width="182.5" height="70" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-65" value="&lt;b&gt;【重点】pre 1. event AOP refer 进队列 【r2】&lt;/b&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=12;fontColor=#00994D;" vertex="1" connectable="0" parent="1">
          <mxGeometry x="1045.503739638611" y="2309.9980856804173" as="geometry">
            <mxPoint x="-173" y="153" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-67" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r0&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="414" y="2525" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-68" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r1&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="465" y="2525" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-69" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r2&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="514.5" y="2525" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-70" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r0&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="727.5" y="2105" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-71" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r1&lt;br&gt;&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="778.5" y="2105" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-72" value="&lt;b&gt;&lt;font color=&quot;#000000&quot;&gt;r2&lt;/font&gt;&lt;/b&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fontSize=12;fontColor=#00994D;fillColor=#E6E6E6;align=center;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="828" y="2105" width="20" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-73" value="4. 打开 page_B" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontColor=#000000;strokeColor=#000000;dashed=1;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="1112.5" y="2280" width="110" height="20" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-74" value="" style="endArrow=classic;html=1;dashed=1;fontSize=13;fontColor=#000000;strokeColor=#666666;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1148" y="2320" as="sourcePoint" />
            <mxPoint x="1223" y="2240" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1168" y="2240" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-75" value="&lt;h1&gt;&lt;font style=&quot;font-size: 15px&quot;&gt;页面曝光 （rootpage）&lt;/font&gt;&lt;/h1&gt;&lt;p&gt;1. rootPage 曝光&lt;br&gt;2. 曝光refer，放在 &lt;b&gt;Refer_4&lt;/b&gt;&amp;nbsp;&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="1225" y="2160" width="170.5" height="90" as="geometry" />
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-76" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;fontSize=15;fontColor=#000000;strokeColor=#ABAB00;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="yxq1icMLa7VZch2Kp3X8-75" target="yxq1icMLa7VZch2Kp3X8-25">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1277.5025" y="2155" as="sourcePoint" />
            <mxPoint x="1680.14" y="2100" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1268" y="2057" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="yxq1icMLa7VZch2Kp3X8-77" value="&lt;font style=&quot;font-size: 12px&quot;&gt;记录 rootpage 曝光 refer&lt;/font&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];fontSize=15;fontColor=#ABAB00;" vertex="1" connectable="0" parent="yxq1icMLa7VZch2Kp3X8-76">
          <mxGeometry x="-0.1553" y="3" relative="1" as="geometry">
            <mxPoint x="215" y="25" as="offset" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
